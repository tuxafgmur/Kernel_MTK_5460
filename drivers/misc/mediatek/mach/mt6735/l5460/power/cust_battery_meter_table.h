#ifndef _CUST_BATTERY_METER_TABLE_H
#define _CUST_BATTERY_METER_TABLE_H

#include <mach/mt_typedefs.h>

// ============================================================
// define
// ============================================================
#define BAT_NTC_10 1
#define BAT_NTC_47 0

#if (BAT_NTC_10 == 1)
#define RBAT_PULL_UP_R             16900	
#endif

#if (BAT_NTC_47 == 1)
#define RBAT_PULL_UP_R             61900	
#endif

#define RBAT_PULL_UP_VOLT          1800



// ============================================================
// ENUM
// ============================================================

// ============================================================
// structure
// ============================================================

// ============================================================
// typedef
// ============================================================
typedef struct _BATTERY_PROFILE_STRUC
{
    kal_int32 percentage;
    kal_int32 voltage;
} BATTERY_PROFILE_STRUC, *BATTERY_PROFILE_STRUC_P;

typedef struct _R_PROFILE_STRUC
{
    kal_int32 resistance; // Ohm
    kal_int32 voltage;
} R_PROFILE_STRUC, *R_PROFILE_STRUC_P;

typedef enum
{
    T1_0C,
    T2_25C,
    T3_50C
} PROFILE_TEMPERATURE;

// ============================================================
// External Variables
// ============================================================

// ============================================================
// External function
// ============================================================

// ============================================================
// <DOD, Battery_Voltage> Table
// ============================================================
#if (BAT_NTC_10 == 1)
    BATT_TEMPERATURE Batt_Temperature_Table[] = {
        {-30,127476},
    	{-25,96862},
        {-20,74354},
        {-15,57626},
        {-10,45068},
        { -5,35548},
        {  0,28267},
        {  5,22650},
        { 10,18280},
        { 15,14855},
        { 20,12151},
        { 25,10000},
        { 30,8279},
        { 35,6892},
        { 40,5768},
        { 45,4852},
        { 50,4101},
        { 55,3483},
        { 60,2970},
        { 65,2544},
        { 70,2188},
        { 75,1889},
        { 80,1637}
    };
#endif

#if (BAT_NTC_47 == 1)
    BATT_TEMPERATURE Batt_Temperature_Table[] = {
        {-20,483954},
        {-15,360850},
        {-10,271697},
        { -5,206463},
        {  0,158214},
        {  5,122259},
        { 10,95227},
        { 15,74730},
        { 20,59065},
        { 25,47000},
        { 30,37643},
        { 35,30334},
        { 40,24591},
        { 45,20048},
        { 50,16433},
        { 55,13539},
        { 60,11210}        
    };
#endif

// T0 -10C
BATTERY_PROFILE_STRUC battery_profile_t0[] =
{
	{0    , 4329 },
	{2    , 4294 },
	{3    , 4270 },
	{5    , 4250 },
	{7    , 4231 },
	{8    , 4212 },
	{10   , 4195 },
	{12   , 4178 },
	{13   , 4162 },
	{15   , 4144 },
	{17   , 4127 },
	{18   , 4111 },
	{20   , 4097 },
	{22   , 4086 },
	{24   , 4073 },
	{25   , 4051 },
	{27   , 4019 },
	{29   , 3991 },
	{30   , 3971 },
	{32   , 3956 },
	{34   , 3944 },
	{35   , 3936 },
	{37   , 3928 },
	{39   , 3918 },
	{40   , 3908 },
	{42   , 3897 },
	{44   , 3887 },
	{45   , 3876 },  
	{47   , 3867 }, 
	{49   , 3858 },
	{50   , 3849 },
	{52   , 3841 },  
	{54   , 3833 },
	{55   , 3826 },
	{57   , 3819 },
	{59   , 3813 },
	{60   , 3807 },
	{62   , 3802 },
	{64   , 3797 },
	{66   , 3792 },
	{67   , 3788 },
	{69   , 3785 },
	{71   , 3782 },
	{72   , 3780 },
	{74   , 3777 },
	{76   , 3774 },
	{77   , 3771 },
	{79   , 3768 },
	{81   , 3764 },
	{82   , 3759 },
	{84   , 3754 },
	{86   , 3748 },
	{87   , 3742 },
	{89   , 3735 },
	{91   , 3728 },
	{92   , 3722 },
	{93   , 3718 },
	{94   , 3714 },
	{95   , 3711 },
	{96   , 3709 },
	{96   , 3706 },
	{97   , 3705 },
	{97   , 3702 },
	{98   , 3701 },
	{98   , 3699 },
	{99   , 3697 },
	{99   , 3695 },
	{100  , 3694 },
	{100  , 3691 }
};      
        
// T1 0C 
BATTERY_PROFILE_STRUC battery_profile_t1[] =
{
	{0    , 4340 },
	{2    , 4313 },
	{3    , 4291 },
	{5    , 4272 },
	{6    , 4254 },
	{8    , 4236 },
	{9    , 4219 },
	{11   , 4202 },
	{13   , 4186 },
	{14   , 4170 },
	{16   , 4154 },
	{17   , 4137 },
	{19   , 4121 },
	{21   , 4105 },
	{22   , 4092 },
	{24   , 4083 },
	{25   , 4070 },
	{27   , 4044 },
	{28   , 4013 },
	{30   , 3989 },
	{32   , 3972 },
	{33   , 3959 },
	{35   , 3949 },
	{36   , 3940 },
	{38   , 3929 },
	{40   , 3917 },
	{41   , 3905 },
	{43   , 3893 },  
	{44   , 3882 }, 
	{46   , 3871 },
	{47   , 3861 },
	{49   , 3852 },  
	{51   , 3844 },
	{52   , 3836 },
	{54   , 3829 },
	{55   , 3822 },
	{57   , 3816 },
	{59   , 3811 },
	{60   , 3805 },
	{62   , 3800 },
	{63   , 3795 },
	{65   , 3791 },
	{66   , 3787 },
	{68   , 3783 },
	{70   , 3781 },
	{71   , 3778 },
	{73   , 3776 },
	{74   , 3772 },
	{76   , 3769 },
	{78   , 3765 },
	{79   , 3760 },
	{81   , 3755 },
	{82   , 3748 },
	{84   , 3741 },
	{85   , 3732 },
	{87   , 3722 },
	{89   , 3712 },
	{90   , 3705 },
	{92   , 3701 },
	{93   , 3696 },
	{95   , 3688 },
	{97   , 3660 },
	{98   , 3601 },
	{99   , 3561 },
	{99   , 3528 },
	{99   , 3502 },
	{100  , 3481 },
	{100  , 3465 },
	{100  , 3465 }
};           

// T2 25C
BATTERY_PROFILE_STRUC battery_profile_t2[] =
{
	{0    , 4337 },
	{2    , 4307 },
	{3    , 4284 },
	{5    , 4264 },
	{6    , 4245 },
	{8    , 4227 },
	{9    , 4209 },
	{11   , 4192 },
	{13   , 4175 },
	{14   , 4159 },
	{16   , 4142 },
	{17   , 4126 },
	{19   , 4110 },
	{21   , 4094 },
	{22   , 4079 },
	{24   , 4069 },
	{25   , 4057 },
	{27   , 4034 },
	{28   , 4011 },
	{30   , 3996 },
	{32   , 3987 },
	{33   , 3980 },
	{35   , 3969 },
	{36   , 3958 },
	{38   , 3947 },
	{40   , 3935 },
	{41   , 3924 },
	{43   , 3910 },  
	{44   , 3893 }, 
	{46   , 3875 },
	{47   , 3861 },
	{49   , 3851 },  
	{51   , 3842 },
	{52   , 3834 },
	{54   , 3827 },
	{55   , 3821 },
	{57   , 3815 },
	{59   , 3810 },
	{60   , 3805 },
	{62   , 3800 },
	{63   , 3796 },
	{65   , 3792 },
	{66   , 3788 },
	{68   , 3784 },
	{70   , 3780 },
	{71   , 3776 },
	{73   , 3771 },
	{74   , 3766 },
	{76   , 3761 },
	{78   , 3755 },
	{79   , 3748 },
	{81   , 3743 },
	{82   , 3737 },
	{84   , 3729 },
	{85   , 3720 },
	{87   , 3711 },
	{89   , 3699 },
	{90   , 3691 },
	{92   , 3689 },
	{93   , 3687 },
	{95   , 3683 },
	{97   , 3651 },
	{98   , 3572 },
	{100  , 3445 },
	{100  , 3309 },
	{100  , 3292 },
	{100  , 3286 },
	{100  , 3282 },
	{100  , 3282 }
};     

// T3 50C
BATTERY_PROFILE_STRUC battery_profile_t3[] =
{
	{0    , 4338 },
	{2    , 4313 },
	{3    , 4291 },
	{5    , 4271 },
	{6    , 4253 },
	{8    , 4235 },
	{9    , 4217 },
	{11   , 4200 },
	{13   , 4183 },
	{14   , 4166 },
	{16   , 4149 },
	{17   , 4133 },
	{19   , 4116 },
	{21   , 4100 },
	{22   , 4085 },
	{24   , 4069 },
	{25   , 4054 },
	{27   , 4040 },
	{28   , 4026 },
	{30   , 4011 },
	{32   , 3998 },
	{33   , 3986 },
	{35   , 3973 },
	{36   , 3961 },
	{38   , 3950 },
	{39   , 3938 },
	{41   , 3926 },
	{43   , 3913 },  
	{44   , 3897 }, 
	{46   , 3877 },
	{47   , 3863 },
	{49   , 3853 },  
	{51   , 3844 },
	{52   , 3836 },
	{54   , 3829 },
	{55   , 3822 },
	{57   , 3816 },
	{58   , 3810 },
	{60   , 3805 },
	{62   , 3800 },
	{63   , 3795 },
	{65   , 3790 },
	{66   , 3786 },
	{68   , 3782 },
	{69   , 3778 },
	{71   , 3774 },
	{73   , 3764 },
	{74   , 3753 },
	{76   , 3747 },
	{77   , 3741 },
	{79   , 3734 },
	{80   , 3729 },
	{82   , 3723 },
	{84   , 3716 },
	{85   , 3707 },
	{87   , 3698 },
	{88   , 3687 },
	{90   , 3678 },
	{92   , 3677 },
	{93   , 3675 },
	{95   , 3671 },
	{96   , 3647 },
	{98   , 3578 },
	{99   , 3472 },
	{100  , 3298 },
	{100  , 3284 },
	{100  , 3278 },
	{100  , 3274 },
	{100  , 3274 }
};           

// battery profile for actual temperature. The size should be the same as T1, T2 and T3
BATTERY_PROFILE_STRUC battery_profile_temperature[] =
{
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },  
	{0  , 0 }, 
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },  
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 }
};    

// ============================================================
// <Rbat, Battery_Voltage> Table
// ============================================================
// T0 -10C
R_PROFILE_STRUC r_profile_t0[] =
{
	{193   , 4329 },
	{1130  , 4294 },
	{1140  , 4270 },
	{1133  , 4250 },
	{1120  , 4231 },
	{1105  , 4212 },
	{1095  , 4195 },
	{1088  , 4178 },
	{1078  , 4162 },
	{1065  , 4144 },
	{1055  , 4127 },
	{1043  , 4111 },
	{1033  , 4097 },
	{1035  , 4086 },
	{1038  , 4073 },
	{1023  , 4051 },
	{988   , 4019 },
	{965   , 3991 },
	{950   , 3971 },
	{945   , 3956 },
	{943   , 3944 },
	{948   , 3936 },
	{948   , 3928 },
	{943   , 3918 },
	{938   , 3908 },
	{933   , 3897 },
	{930   , 3887 },
	{925   , 3876 },  
	{923   , 3867 }, 
	{920   , 3858 },
	{918   , 3849 },
	{920   , 3841 },  
	{915   , 3833 },
	{915   , 3826 },
	{908   , 3819 },
	{913   , 3813 },
	{910   , 3807 },
	{925   , 3802 },
	{880   , 3797 },
	{935   , 3792 },
	{943   , 3788 },
	{958   , 3785 },
	{968   , 3782 },
	{975   , 3780 },
	{980   , 3777 },
	{993   , 3774 },
	{1005  , 3771 },
	{1023  , 3768 },
	{1043  , 3764 },
	{1068  , 3759 },
	{1093  , 3754 },
	{1123  , 3748 },
	{1168  , 3742 },
	{1213  , 3735 },
	{1273  , 3728 },
	{1305  , 3722 },
	{1298  , 3718 },
	{1285  , 3714 },
	{1280  , 3711 },
	{1275  , 3709 },
	{1265  , 3706 },
	{1265  , 3705 },
	{1258  , 3702 },
	{1253  , 3701 },
	{1250  , 3699 },
	{1245  , 3697 },
	{1240  , 3695 },
	{1238  , 3694 },
	{1230  , 3691 }
};      

// T1 0C
R_PROFILE_STRUC r_profile_t1[] =
{
	{180   , 4340 },
	{615   , 4313 },
	{618   , 4291 },
	{620   , 4272 },
	{620   , 4254 },
	{620   , 4236 },
	{620   , 4219 },
	{618   , 4202 },
	{620   , 4186 },
	{620   , 4170 },
	{620   , 4154 },
	{620   , 4137 },
	{620   , 4121 },
	{618   , 4105 },
	{615   , 4092 },
	{633   , 4083 },
	{645   , 4070 },
	{633   , 4044 },
	{615   , 4013 },
	{605   , 3989 },
	{600   , 3972 },
	{600   , 3959 },
	{598   , 3949 },
	{600   , 3940 },
	{593   , 3929 },
	{585   , 3917 },
	{580   , 3905 },
	{575   , 3893 },  
	{570   , 3882 }, 
	{568   , 3871 },
	{568   , 3861 },
	{568   , 3852 },  
	{568   , 3844 },
	{568   , 3836 },
	{570   , 3829 },
	{570   , 3822 },
	{573   , 3816 },
	{578   , 3811 },
	{578   , 3805 },
	{580   , 3800 },
	{583   , 3795 },
	{585   , 3791 },
	{588   , 3787 },
	{588   , 3783 },
	{590   , 3781 },
	{590   , 3778 },
	{593   , 3776 },
	{593   , 3772 },
	{595   , 3769 },
	{600   , 3765 },
	{605   , 3760 },
	{613   , 3755 },
	{623   , 3748 },
	{638   , 3741 },
	{653   , 3732 },
	{670   , 3722 },
	{688   , 3712 },
	{715   , 3705 },
	{753   , 3701 },
	{798   , 3696 },
	{868   , 3688 },
	{950   , 3660 },
	{1005  , 3601 },
	{905   , 3561 },
	{823   , 3528 },
	{758   , 3502 },
	{705   , 3481 },
	{665   , 3465 },
	{665   , 3465 }
};     

// T2 25C
R_PROFILE_STRUC r_profile_t2[] =
{
	{128  , 4337 },
	{173  , 4307 },
	{173  , 4284 },
	{170  , 4264 },
	{170  , 4245 },
	{170  , 4227 },
	{170  , 4209 },
	{170  , 4192 },
	{173  , 4175 },
	{175  , 4159 },
	{175  , 4142 },
	{178  , 4126 },
	{175  , 4110 },
	{178  , 4094 },
	{180  , 4079 },
	{185  , 4069 },
	{190  , 4057 },
	{188  , 4034 },
	{188  , 4011 },
	{190  , 3996 },
	{193  , 3987 },
	{200  , 3980 },
	{200  , 3969 },
	{203  , 3958 },
	{205  , 3947 },
	{210  , 3935 },
	{215  , 3924 },
	{210  , 3910 },  
	{198  , 3893 }, 
	{180  , 3875 },
	{173  , 3861 },
	{170  , 3851 },  
	{170  , 3842 },
	{170  , 3834 },
	{168  , 3827 },
	{165  , 3821 },
	{168  , 3815 },
	{168  , 3810 },
	{170  , 3805 },
	{170  , 3800 },
	{173  , 3796 },
	{175  , 3792 },
	{175  , 3788 },
	{175  , 3784 },
	{175  , 3780 },
	{175  , 3776 },
	{170  , 3771 },
	{170  , 3766 },
	{168  , 3761 },
	{168  , 3755 },
	{165  , 3748 },
	{165  , 3743 },
	{165  , 3737 },
	{165  , 3729 },
	{168  , 3720 },
	{168  , 3711 },
	{170  , 3699 },
	{168  , 3691 },
	{170  , 3689 },
	{175  , 3687 },
	{185  , 3683 },
	{185  , 3651 },
	{195  , 3572 },
	{228  , 3445 },
	{275  , 3309 },
	{233  , 3292 },
	{218  , 3286 },
	{205  , 3282 },
	{210  , 3282 }
};  

// T3 50C
R_PROFILE_STRUC r_profile_t3[] =
{
	{115  , 4338 },
	{143  , 4313 },
	{140  , 4291 },
	{140  , 4271 },
	{143  , 4253 },
	{140  , 4235 },
	{140  , 4217 },
	{143  , 4200 },
	{145  , 4183 },
	{143  , 4166 },
	{143  , 4149 },
	{145  , 4133 },
	{145  , 4116 },
	{145  , 4100 },
	{148  , 4085 },
	{148  , 4069 },
	{148  , 4054 },
	{150  , 4040 },
	{153  , 4026 },
	{150  , 4011 },
	{153  , 3998 },
	{155  , 3986 },
	{158  , 3973 },
	{160  , 3961 },
	{165  , 3950 },
	{168  , 3938 },
	{170  , 3926 },
	{173  , 3913 },  
	{168  , 3897 }, 
	{150  , 3877 },
	{145  , 3863 },
	{145  , 3853 },  
	{143  , 3844 },
	{143  , 3836 },
	{143  , 3829 },
	{143  , 3822 },
	{145  , 3816 },
	{145  , 3810 },
	{145  , 3805 },
	{148  , 3800 },
	{148  , 3795 },
	{148  , 3790 },
	{150  , 3786 },
	{153  , 3782 },
	{155  , 3778 },
	{158  , 3774 },
	{148  , 3764 },
	{143  , 3753 },
	{143  , 3747 },
	{143  , 3741 },
	{140  , 3734 },
	{143  , 3729 },
	{143  , 3723 },
	{143  , 3716 },
	{143  , 3707 },
	{143  , 3698 },
	{145  , 3687 },
	{140  , 3678 },
	{145  , 3677 },
	{148  , 3675 },
	{155  , 3671 },
	{153  , 3647 },
	{160  , 3578 },
	{180  , 3472 },
	{245  , 3298 },
	{210  , 3284 },
	{198  , 3278 },
	{188  , 3274 },
	{188  , 3274 }
};    

// r-table profile for actual temperature. The size should be the same as T1, T2 and T3
R_PROFILE_STRUC r_profile_temperature[] =
{
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },  
	{0  , 0 }, 
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },  
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 }
};    

// ============================================================
// function prototype
// ============================================================
int fgauge_get_saddles(void);
BATTERY_PROFILE_STRUC_P fgauge_get_profile(kal_uint32 temperature);

int fgauge_get_saddles_r_table(void);
R_PROFILE_STRUC_P fgauge_get_profile_r_table(kal_uint32 temperature);

#endif	//#ifndef _CUST_BATTERY_METER_TABLE_H

